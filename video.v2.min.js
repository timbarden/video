var arrVideos=[];!function(){function y(n,i){new IntersectionObserver(function(t){switch(n.type){case"youtube":if(i.isMuted()){var e=i.getPlayerState();2==e?t[0].isIntersecting&&i.playVideo():1==e&&!t[0].isIntersecting&&i.pauseVideo()}break;case"vimeo":i.getVolume().then(function(e){0==e&&i.getPaused().then(function(e){e?t[0].isIntersecting&&i.play():!t[0].isIntersecting&&i.pause()})})}},{rootMargin:"0px 0px 0px 0px"}).observe(n.element)}function v(a){function t(){var e,t,n=videoFillTo.clientWidth,i=videoFillTo.clientHeight;n/(16/9)<i?(e=Math.ceil(i*(16/9)),a.element.style.width=e+"px",a.element.style.height=i+"px"):(t=Math.ceil(n/(16/9)),a.element.style.width=n+"px",a.element.style.height=t+"px"),a.element.style.top="50%",a.element.style.left="50%",a.element.style.bottom="auto",a.element.style.right="auto",a.element.style.transform="translate(-50%, -50%)"}if(null!=a.dataset.videofill){if(videoFillTo=document.querySelector(a.dataset.videofill),n)new ResizeObserver(function(e){t()}).observe(videoFillTo);t(),window.addEventListener("resize",function(){t()})}}var e=window,r=!1,a=!1,o=!1,m=0,n="ResizeObserver"in e;blnIntersectionObserver="IntersectionObserver"in e,onYouTubeIframeAPIReady=function(){r=!0},initYTPlayers=function(e,c){function t(e,n){m++;var t,i,a=n.dataset,r=(t=a.videosrc,(i=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/))&&11==i[7].length?i=i[7]:(console.info("Warning Youtube Link is incorrect on player: "+t),i=!1),i),o="true"==a.autoplay?1:0,s="true"==a.mute?1:0,l="true"==a.loop;n.insertAdjacentHTML("beforeend","<div id='ytplayer_"+m+"'></div>");var u=new YT.Player("ytplayer_"+m,{videoId:r,playerVars:{autoplay:o,controls:0,disablekb:1,loop:l&&1,modestbranding:1,mute:s,playlist:r,playsinline:s,showinfo:0},events:{onReady:function(e){if(blnIntersectionObserver&&y(d,e.target),1==o&&e.target.playVideo(),n.dataset.end&&n.dataset.end<e.target.getDuration())var t=setInterval(function(){parseInt(e.target.getCurrentTime())>=n.dataset.end&&(l?e.target.seekTo(0):(e.target.seekTo(e.target.getDuration()),clearInterval(t)))},1e3)},onStateChange:function(e){e.data==YT.PlayerState.ENDED&&c(d)}}}),d={dataset:a,element:n,player:u,type:"youtube"};arrVideos.push(d),v(d)}if(!r){var n=document.createElement("script");n.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}var a=setInterval(function(){r&&(clearInterval(a),t(0,e))},200)},initVimeoPlayers=function(e,u){if(!a){a=!0;var t=document.createElement("script");t.src="https://player.vimeo.com/api/player.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),t.onload=function(){o=!0}}var i=setInterval(function(){o&&(clearInterval(i),function(e,t){m++;var n=t.dataset,i="true"==n.autoplay,a="true"==n.mute,r="true"==n.loop,o={autoplay:i,byline:!1,controls:!a,id:n.videosrc,loop:r,muted:a,playsinline:a,title:!1};t.setAttribute("id","vimeoplayer_"+m);var s=new Vimeo.Player("vimeoplayer_"+m,o),l={dataset:n,element:t,player:s,type:"vimeo"};a&&s.setVolume(0),blnIntersectionObserver&&y(l,s),arrVideos.push(l),v(l),t.dataset.end&&s.getDuration().then(function(e){t.dataset.end<e&&s.on("timeupdate",function(e){e.seconds>t.dataset.end&&(r?s.setCurrentTime(0):(s.pause(),u({player:s,type:"vimeo"})))})}),s.on("ended",function(){u({player:s,type:"vimeo"})})}(0,e))},10)},checkPlayers=function(e,t){var n=document.querySelectorAll(e),i=n.length;for(p=0;p<i;p++)-1<n[p].getAttribute("data-videosrc").indexOf("youtu")?initYTPlayers(n[p],function(e){t(e)}):-1<n[p].getAttribute("data-videosrc").indexOf("vimeo")?initVimeoPlayers(n[p],function(e){t(e)}):console.log("Video source is not supported"),n[p].classList.add("video--init")}}();