var arrVideos=[];(function(){function e(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,n=e.match(t);return n&&11==n[7].length?n=n[7]:(console.info("Warning Youtube Link is incorrect on player: "+e),n=!1),n}function t(e,t){var n=new IntersectionObserver(function(n){switch(e.type){case"youtube":if(t.isMuted()){var i=t.getPlayerState();2==i?n[0].isIntersecting&&t.playVideo():1==i&&!n[0].isIntersecting&&t.pauseVideo()}break;case"vimeo":t.getVolume().then(function(e){0==e&&t.getPaused().then(function(e){e?n[0].isIntersecting&&t.play():!n[0].isIntersecting&&t.pause()})})}},{rootMargin:"0px 0px 0px 0px"});n.observe(e.element)}function n(e){if(null!=e.dataset.videofill){if(videoFillTo=document.querySelector(e.dataset.videofill),l){var t=new ResizeObserver(function(e){n()});t.observe(videoFillTo)}function n(){var t,n,i=16/9,a=videoFillTo.clientWidth,r=videoFillTo.clientHeight;a/i<r?(t=Math.ceil(r*i),e.element.style.width=t+"px",e.element.style.height=r+"px"):(n=Math.ceil(a/i),e.element.style.width=a+"px",e.element.style.height=n+"px"),e.element.style.top="50%",e.element.style.left="50%",e.element.style.bottom="auto",e.element.style.right="auto",e.element.style.transform="translate(-50%, -50%)"}n(),i.addEventListener("resize",function(){n()})}}let i=window,a=!1,r=!1,o=!1,s=0,l="ResizeObserver"in i;blnIntersectionObserver="IntersectionObserver"in i,onYouTubeIframeAPIReady=function(){a=!0},initYTPlayers=function(i,r){function o(i,a){function o(e){e.data==YT.PlayerState.ENDED&&r(m)}function l(e){if(blnIntersectionObserver&&t(m,e.target),1==d&&e.target.playVideo(),a.dataset.end&&a.dataset.end<e.target.getDuration())var n=setInterval(function(){parseInt(e.target.getCurrentTime())>=a.dataset.end&&(v?e.target.seekTo(0):(e.target.seekTo(e.target.getDuration()),clearInterval(n)))},1e3)}s++;var u=a.dataset,c=e(u.videosrc),d="true"==u.autoplay?1:0,p="true"==u.mute?1:0,v="true"==u.loop;a.insertAdjacentHTML("beforeend","<div id='ytplayer_"+s+"'></div>");var y=new YT.Player("ytplayer_"+s,{videoId:c,playerVars:{autoplay:d,controls:0,disablekb:1,loop:v&&1,modestbranding:1,mute:p,playlist:c,playsinline:p,showinfo:0},events:{onReady:l,onStateChange:o}}),m={dataset:u,element:a,player:y,type:"youtube"};arrVideos.push(m),n(m)}if(!a){var l=document.createElement("script");l.src="https://www.youtube.com/iframe_api";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(l,u)}var c=setInterval(function(){a&&(clearInterval(c),o(s,i))},200)},initVimeoPlayers=function(e,i){function a(e,a){s++;var r=a.dataset,o="true"==r.autoplay,l="true"==r.mute,u="true"==r.loop,c={autoplay:o,byline:!1,controls:!l,id:r.videosrc,loop:u,muted:l,playsinline:l,title:!1};a.setAttribute("id","vimeoplayer_"+s);var d=new Vimeo.Player("vimeoplayer_"+s,c),p={dataset:r,element:a,player:d,type:"vimeo"};l&&d.setVolume(0),blnIntersectionObserver&&t(p,d),arrVideos.push(p),n(p),a.dataset.end&&d.getDuration().then(function(e){a.dataset.end<e&&d.on("timeupdate",function(e){e.seconds>a.dataset.end&&(u?d.setCurrentTime(0):(d.pause(),i({player:d,type:"vimeo"})))})}),d.on("ended",function(){i({player:d,type:"vimeo"})})}if(!r){r=!0;var l=document.createElement("script");l.src="https://player.vimeo.com/api/player.js";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(l,u),l.onload=function(){o=!0}}var c=setInterval(function(){o&&(clearInterval(c),a(s,e))},10)},checkPlayers=function(e,t){var n=document.querySelectorAll(e),i=n.length;for(p=0;p<i;p++)n[p].getAttribute("data-videosrc").indexOf("youtu")>-1?initYTPlayers(n[p],function(e){t(e)}):n[p].getAttribute("data-videosrc").indexOf("vimeo")>-1?initVimeoPlayers(n[p],function(e){t(e)}):console.log("Video source is not supported"),n[p].classList.add("video--init")}})();